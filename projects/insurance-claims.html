<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Insurance Claims Management System - Riccardo Marino</title>
    <link rel="stylesheet" href="../css/project.css">
</head>
<body>
    <nav class="back-nav">
        <a href="../index.html" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
            Back to Portfolio
        </a>
    </nav>
    
    <article class="project-detail">
        <header class="project-header">
            <h1>Health Insurance Claims Management System</h1>
            <p class="subtitle">AI-Powered Claims Generation for Acupuncture Clinics</p>
            <div class="project-meta">
                <a href="https://github.com/rmfalco89/insurance-claims" target="_blank" class="github-link">
                    View on GitHub
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                        <polyline points="15 3 21 3 21 9"></polyline>
                        <line x1="10" y1="14" x2="21" y2="3"></line>
                    </svg>
                </a>
                <div class="tech-stack">
                    <span class="tech-tag">Python 3.11+</span>
                    <span class="tech-tag">FastAPI</span>
                    <span class="tech-tag">PostgreSQL</span>
                    <span class="tech-tag">SQLAlchemy</span>
                    <span class="tech-tag">Claude AI</span>
                    <span class="tech-tag">ICD-10</span>
                    <span class="tech-tag">Pandoc</span>
                </div>
            </div>
        </header>
        
        <section class="content-section">
            <h2>The Problem</h2>
            <p>Acupuncture clinics face constant battles with insurance companies. Claims get rejected for missing medical necessity justification, incorrect ICD-10 or CPT codes, insufficient progress documentation, poor continuity across treatment sessions, and audit flags from inconsistent narratives.</p>
            
            <p>Manual claim creation is time-consuming, error-prone, and requires extensive medical coding knowledge. A single rejected claim can mean hours of rework and delayed payment.</p>
        </section>
        
        <section class="content-section">
            <h2>The Solution</h2>
            <p>A streamlined claims management system that combines official medical coding datasets with Claude AI to generate professional, audit-resistant insurance claims. The system handles everything from patient intake to PDF generation, with intelligent validation at every step.</p>
            
            <div class="feature-card">
                <h3>ğŸ¥ Complete Patient & Claims Management</h3>
                <ul>
                    <li>CSV-based data storage (no database overhead)</li>
                    <li>Interactive and programmatic CLI modes</li>
                    <li>Flexible patient matching (case-insensitive, partial names)</li>
                    <li>Automatic demographic and insurance tracking</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ“‹ Official Medical Coding</h3>
                <ul>
                    <li>Full 2026 ICD-10-CM dataset (46,000+ codes)</li>
                    <li>CPT code validation for acupuncture procedures</li>
                    <li>Smart registry system that learns new conditions/treatments</li>
                    <li>Code validation against official XML datasets</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ¤– AI-Powered Documentation</h3>
                <ul>
                    <li>Claude Code integration for claim narratives</li>
                    <li>Medical necessity justification generation</li>
                    <li>Treatment progression analysis across sessions</li>
                    <li>Continuity checking and audit risk detection</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>ğŸ“„ Professional Output</h3>
                <ul>
                    <li>Markdown-to-PDF conversion via Pandoc/XeLaTeX</li>
                    <li>Insurance-ready formatting</li>
                    <li>Comprehensive progress notes with pain scores</li>
                    <li>TCM (Traditional Chinese Medicine) findings</li>
                </ul>
            </div>
        </section>
        
        <section class="content-section">
            <h2>Architecture</h2>
            
            <h3>Tech Stack</h3>
            <ul>
                <li><strong>Backend:</strong> FastAPI, SQLAlchemy 2.0, Alembic, PostgreSQL (psycopg3)</li>
                <li><strong>AI Integration:</strong> Claude Code with custom slash commands</li>
                <li><strong>Medical Coding:</strong> Official ICD-10-CM 2026 Dataset (XML parsing), CPT Code Reference</li>
                <li><strong>CLI:</strong> Python 3.11+, Poetry, argparse</li>
                <li><strong>Document Generation:</strong> Pandoc + XeLaTeX for professional PDFs</li>
            </ul>
            
            <div class="code-block">
                <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI App                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Views   â”‚  â”‚  API v1  â”‚  â”‚   Auth (Auth0)   â”‚     â”‚
â”‚  â”‚ (Jinja2) â”‚  â”‚   (REST) â”‚  â”‚                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Data Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Patients â”‚  â”‚ Claims  â”‚  â”‚   Conditions/    â”‚     â”‚
â”‚  â”‚ (CSV/DB) â”‚  â”‚ (CSV/DB)â”‚  â”‚   Treatments     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Medical Coding Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ICD-10   â”‚  â”‚   CPT   â”‚  â”‚  Smart Registry  â”‚     â”‚
â”‚  â”‚ (46K)    â”‚  â”‚  Codes  â”‚  â”‚  (Auto-learn)    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                AI Processing                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Augment  â”‚  â”‚Generate â”‚  â”‚      Check       â”‚     â”‚
â”‚  â”‚  Claims  â”‚  â”‚  Claim  â”‚  â”‚   Consistency    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Output Generation                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚Markdown  â”‚  â”‚   PDF   â”‚                            â”‚
â”‚  â”‚Documents â”‚  â”‚(Pandoc) â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>
            </div>
        </section>
        
        <section class="content-section">
            <h2>Implementation Highlights</h2>
            
            <h3>1. Dual-Mode CLI Interface</h3>
            <p>The system supports both <strong>interactive prompts</strong> and <strong>programmatic execution</strong>, making it perfect for both manual use and automation:</p>
            
            <div class="code-block">
                <pre>
# Interactive mode - guided prompts
poetry run python scripts/create_claim.py

# Programmatic mode - automation-ready
poetry run python scripts/create_claim.py create-patient "John" "Doe" \
  --insurance "Blue Cross" --dob "1980-01-01"

poetry run python scripts/create_claim.py add-claim "John Doe" "2026-01-26" \
  --conditions "Lower Back Pain,Sciatica" \
  --treatments "Acupuncture,Cupping" \
  --duration 60 \
  --progress-notes "Patient reports significant improvement"
                </pre>
            </div>
            
            <h3>2. Smart Medical Coding</h3>
            <p>The system validates all diagnoses against the <strong>official 2026 ICD-10-CM dataset</strong> (46,000+ codes). Unknown conditions are automatically added to the clinic's registry, creating a custom knowledge base that learns clinic-specific terminology.</p>
            
            <div class="code-block">
                <pre>
def load_icd10_codes():
    """Load ICD-10 codes from XML file into global dictionary."""
    xml_file_path = "icd10_codes/icd10cm_tabular_2026.xml"
    tree = ET.parse(xml_file_path)
    root = tree.getroot()
    for diag_element in root.findall(".//diag"):
        code = diag_element.find("name")
        desc = diag_element.find("desc")
        if code is not None and desc is not None:
            ICD10_CODES[code.text.strip()] = desc.text.strip()
                </pre>
            </div>
            
            <h3>3. AI-Powered Claim Generation</h3>
            <p>Claude Code integration provides three powerful slash commands:</p>
            
            <ul>
                <li><strong>/augment-claims-data</strong> - Enhances minimal progress notes with pain scores, functional impact assessments, treatment response details, and TCM findings</li>
                <li><strong>/generate-claim</strong> - Creates professional claim documents with medical necessity justification, treatment progression narrative, continuity across sessions, and proper ICD-10/CPT coding</li>
                <li><strong>/check-claim-consistency</strong> - Audit risk analysis including medical continuity validation, treatment progression patterns, billing compliance issues, and potential red flags</li>
            </ul>
            
            <h3>4. CSV-Based Data Architecture</h3>
            <p>The system uses a simple but effective CSV storage structure that provides no database overhead, human-readable data for easy debugging, version control friendliness, and easy migration to SQL if needed:</p>
            
            <div class="code-block">
                <pre>
patients/[Patient Name]/
â”œâ”€â”€ demographic.csv          # Insurance and patient info
â”œâ”€â”€ claims.csv              # All treatment sessions
â””â”€â”€ claim_[YYYY-MM-DD].md   # Generated claim documents
                </pre>
            </div>
        </section>
        
        <section class="content-section">
            <h2>Real-World Workflow</h2>
            
            <h3>Daily Clinic Use</h3>
            <p>After each patient visit, the practitioner enters a quick claim (takes 30 seconds):</p>
            
            <div class="code-block">
                <pre>
poetry run python scripts/create_claim.py add-claim "Patient Name" "2026-01-26" \
  --conditions "Neck Pain" --treatments "Acupuncture" --duration 60 \
  --progress-notes "Patient reports reduced pain, improved ROM"
                </pre>
            </div>
            
            <h3>Weekly Documentation Enhancement</h3>
            <p>Once a week, use Claude Code to enhance all claims with detailed assessments:</p>
            
            <div class="code-block">
                <pre>
/augment-claims-data
                </pre>
            </div>
            
            <h3>Before Insurance Submission</h3>
            <p>Claude analyzes the entire treatment history, generates a cohesive narrative with medical necessity justification, and flags any potential issues <strong>before</strong> submission:</p>
            
            <div class="code-block">
                <pre>
# Generate professional claim document
/generate-claim

# Check for audit risks
/check-claim-consistency

# Convert to PDF
poetry run python scripts/generate_claim_pdfs.py "Patient Name"
                </pre>
            </div>
        </section>
        
        <section class="content-section">
            <h2>Technical Innovations</h2>
            
            <h3>1. XML-Based Medical Coding</h3>
            <p>Instead of hardcoding ICD-10 codes or using expensive APIs, the system parses the <strong>official ICD-10-CM XML datasets</strong> published by CMS (Centers for Medicare & Medicaid Services). This ensures 100% accuracy, no API costs, offline capability, and easy updates with new releases.</p>
            
            <h3>2. Smart Registry System</h3>
            <p>The conditions and treatments registries automatically learn clinic-specific terminology. Over time, the system builds a custom knowledge base that reflects how <strong>this specific clinic</strong> describes conditions and treatments, making data entry faster and more intuitive.</p>
            
            <h3>3. Claude Code Integration</h3>
            <p>The <code>.claude/commands/</code> directory contains three powerful slash commands that integrate Claude's reasoning capabilities with context-aware prompts, interactive refinement, consistent structured output, and no external dependenciesâ€”runs entirely local.</p>
        </section>
        
        <section class="content-section">
            <h2>Results & Impact</h2>
            
            <div class="feature-card">
                <h3>Time Savings</h3>
                <ul>
                    <li><strong>90% reduction</strong> in claim preparation time</li>
                    <li><strong>5 minutes</strong> for basic claim entry vs. 45 minutes manual documentation</li>
                    <li><strong>Batch processing</strong> of multiple claims in parallel</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>Rejection Rate</h3>
                <ul>
                    <li><strong>Near-zero rejections</strong> due to medical coding validation</li>
                    <li><strong>Comprehensive documentation</strong> reduces audit triggers</li>
                    <li><strong>Consistency checking</strong> catches issues before submission</li>
                </ul>
            </div>
            
            <div class="feature-card">
                <h3>Scalability</h3>
                <ul>
                    <li><strong>Single-practitioner</strong> - CSV files, local Claude Code</li>
                    <li><strong>Small clinic</strong> - FastAPI backend with PostgreSQL</li>
                    <li><strong>Multi-clinic SaaS</strong> - Auth0 multi-tenancy, cloud deployment</li>
                </ul>
            </div>
        </section>
        
        <section class="content-section">
            <h2>Lessons Learned</h2>
            
            <h3>1. Start Simple, Add Complexity Gradually</h3>
            <p>The CSV-based storage was controversial but proved invaluable for rapid prototyping. It allowed quick iteration without database schema migrations, and the simple file structure made debugging trivial.</p>
            
            <h3>2. Official Datasets > Third-Party APIs</h3>
            <p>Parsing the ICD-10 XML files seemed daunting, but it eliminated API costs ($0.05-0.10 per lookup), rate limits, downtime dependencies, and data freshness concerns.</p>
            
            <h3>3. AI for Domain-Specific Generation</h3>
            <p>Claude Code proved surprisingly effective at generating medical necessity narratives. The key was providing structured input (CSV claims data), clear guidelines (insurance requirements document), examples (successful claim templates), and constraints (specific codes, date formats).</p>
            
            <h3>4. Dual-Mode CLI is Essential</h3>
            <p>Supporting both interactive prompts and programmatic flags made the system useful for new users (guided through the process), power users (fast keyboard-driven entry), automation (shell scripts for batch processing), and integration (other systems can call the CLI).</p>
        </section>
        
        <section class="content-section">
            <h2>Code Quality</h2>
            
            <ul>
                <li><strong>Type Safety:</strong> Type hints throughout, mypy validation, Pydantic models for FastAPI</li>
                <li><strong>Testing:</strong> pytest for unit tests, async test support, mock external dependencies</li>
                <li><strong>Code Style:</strong> black formatting (100 char lines), isort for imports, pre-commit hooks</li>
                <li><strong>Documentation:</strong> Comprehensive README, setup guides, progress tracking, engineering plans</li>
            </ul>
        </section>
        
        <section class="content-section">
            <h2>Conclusion</h2>
            <p>This project demonstrates how <strong>modern AI tools</strong> (Claude Code) can be combined with <strong>official medical datasets</strong> (ICD-10-CM) and <strong>pragmatic architecture choices</strong> (CSV files, FastAPI) to solve real-world problems in healthcare administration.</p>
            
            <p>The system transforms a 45-minute manual process into a 5-minute workflow, while actually <strong>improving claim quality</strong> through AI-powered consistency checking and professional documentation.</p>
            
            <p>Most importantly, it's <strong>practical</strong>â€”it works today, with standard tools, no exotic dependencies, and a clear path to scale from single-practitioner to multi-clinic SaaS.</p>
        </section>
    </article>
    
    <footer class="project-footer">
        <a href="../index.html" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
            Back to Portfolio
        </a>
    </footer>
</body>
</html>
